# ETF期权波动率策略回测系统设计文档

## 1. 系统概述

本文档描述了ETF期权回测系统中新增的基于波动率策略的回测功能设计方案。该功能允许用户基于ETF标的历史波动率数据，设置期权的波动率参数进行策略回测。

## 2. 页面布局设计

### 2.1 主要功能区域

1. **ETF标的选择区**
   - ETF代码和名称输入框
   - 支持模糊搜索

2. **历史波动率数据展示区**
   - 月度波动率分布箱线图
   - 波动率钟形分布曲线
     * 显示一个标准差(1σ)区域
     * 标注关键统计值
   - 数据统计指标
     * 75分位线数值
     * 中位数线数值
     * 25分位线数值
   - 参数推荐区
     * PUT期权推荐波动率范围
     * CALL期权推荐波动率范围

3. **策略参数设置区**
   - PUT期权波动率设置
     * 下拉选择框
     * 直接输入框（支持百分比输入）
   - CALL期权波动率设置
     * 下拉选择框
     * 直接输入框（支持百分比输入）

4. **回测周期设置区**
   - 日期选择器（起始日期和结束日期）
   - 动态快捷周期选择按钮组
     * 近1月（基于数据时间区间）
     * 近3月（基于数据时间区间）
     * 近6月（基于数据时间区间）
     * 近1年（基于数据时间区间）

5. **操作按钮区**
   - 执行回测按钮
   - 方案管理按钮
   - 保存方案选项

## 3. 交互设计

### 3.1 ETF标的选择
- 选择ETF后自动加载该标的的历史波动率数据
- 更新波动率图表和统计数据
- 自动计算并显示推荐参数设置

### 3.2 历史波动率展示
- 箱线图和钟形曲线支持鼠标悬停显示详细数据
- 标准差区域使用半透明底色标注
- 关键统计值使用不同颜色标注
- 图表支持简单的缩放和平移操作

### 3.3 参数设置
- 支持下拉选择和直接输入两种方式
- 直接输入时自动格式化百分比值
- 输入值实时验证
- 超出推荐范围时显示提示信息

### 3.4 日期选择
- 日期选择器支持日历展示
- 快捷按钮点击自动设置对应时间段
- 自动校验日期有效性

## 4. 数据展示

### 4.1 波动率统计图表
- 箱线图展示
  * X轴：时间
  * Y轴：波动率百分比
  * 显示四分位数据
  * 显示异常值点

- 钟形分布曲线
  * X轴：波动率百分比
  * Y轴：频率
  * 标注1σ区间
  * 显示均值和中位数线

### 4.2 回测结果展示
- 策略收益曲线
- 策略对比分析
- 交易记录明细
- 每日浮动盈亏

## 5. 技术实现

### 5.1 前端实现
- 使用React框架构建界面
- ECharts绘制统计图表
- 自定义输入组件实现参数设置
- 响应式设计适配不同屏幕

### 5.2 数据处理
- 历史波动率数据计算
- 参数推荐算法
- 实时数据验证和格式化
- 回测结果计算和展示

## 6. 注意事项

1. 确保历史数据的准确性和完整性
2. 优化大量数据的加载和展示性能
3. 做好参数输入的验证和错误提示
4. 保证图表展示的清晰度和可读性
